This is to install wifi manager that works with iwd you should have every base package needed from the install.sh script but you will need to configure NetworkManager to use iwd

so type this command in terminal

sudo nano /etc/NetworkManager/NetworkManager.conf

and paste these lines 

[device]
wifi.backend=iwd

and then go back to terminal and run this command 

sudo systemctl restart NetworkManager

sudo systemctl enable NetworkManager

The network manager should now be working with your system and waybar this is a iwd setup btw so make sure you don't have any other conflicting packages

// Warning: Install Network Manager if you want but dont use it anymore just add it back to the waybar config
// If iwd is acting weird 

--- iwd may be configured to disable network configuration. Check the main configuration file:

sudo nano /etc/iwd/main.conf

--- Look for a [General] section and ensure it doesn't contain EnableNetworkConfiguration=false. If it does, change it to:

    [General]
    EnableNetworkConfiguration=true

    If the section or option doesnâ€™t exist, add the [General] section with the EnableNetworkConfiguration=true line.

    After making changes to the configuration file, restart the iwd service:


sudo systemctl restart iwd
sudo systemctl status iwd


--- This is for if the devices show power off
sudo iwctl device wlan0 set-property Powered on
sudo iwctl device wlan1 set-property Powered on

// Useful commands for iwd 

iwctl

device list
station wlan0 show 
station wlan0 scan
station wlan0 get-networks
station wlan0 connect "ROUTER_SSID"
